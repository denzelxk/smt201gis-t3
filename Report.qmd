# Methodology

## 3.1 Datasets Used

To apply GIS-based Accessibility Analysis and Mapping of Emergency Evacuation Centres and Medical Services, we need the DEM layer of Derna, the hexagonal layer of Derna City, the OSM layer of Derna and the floor extent of Derna. These data can be obtained from the following datasets:

-   **OSM data for Libya**

    -   **Format**: SHP

    -   **Purpose**: An open street map shapefile of Libya used to determine the number of buildings, schools and universities in Derna city.

    -   **Link**: https://download.geofabrik.de/africa/libya.html

    -   **Note**: Download the file named "libya-latest-free.shp.zip" under "Commonly Used Formats".

-   Flood impact on Derna

    -   Format: SHP

    -   Purpose: A shapefile showing the extent of Derna city that has been affected by the flood

    -   Link: https://data.humdata.org/dataset/flood-impact-assessment-in-derna-dams-east-province-libya

-   Derna Health Facilities

    -   Format: Geopackage

    -   Purpose: A geopackage with the locations of health facilities in Libya

    -   Link: https://data.humdata.org/dataset/hotosm_lby_health_facilities

-   Derna Road Layer

    -   Format: Geopackage

    -   Purpose: A geopackage of the roads that are located within Libya

    -   Link: https://data.humdata.org/dataset/hotosm_lby_roads

-   Derna City Hexagon Layer

    -   Format: SHP

    -   Purpose: A shapefile showing Derna city classified into hexagons

    -   Link: Provided on elearn

-   30-meter Digital Elevation Model (DEM) data, taken from the Shuttle Radar Topography Mission (SRTM)

    -   Format: TIFF

    -   Purpose: A raster dataset of the elevation across Derna city to assess the suitability of selected potential evacuation centres and healthcare facilities.

    -   Link: https://earthexplorer.usgs.gov/

    -   Note: You will need to create a USGS account in order to download the SRTM DEM data. Follow the steps in 3.2.3 Extracting the DEM data from USGS to retrieve the data.

-   Open aerial map of Derna

    -   Format: TIFF

    -   Purpose: A raster layers used as a background for all our maps

    -   Link: https://map.openaerialmap.org/#/-18.6328125,18.47960905583197,3?\_k=2un4va

    -   Note: Follow the steps in 3.2.2 to extract the satellite images for the Derna study area.

### Steps

Create 3 folders named "data.shp", "geopackage" and "data.tif"

1.  **data.shp** folder

    -   Unzip the "libya-latest-free.shp", "FL20230912LBY_SHP" and "Derna_city_250m_hexagon" files and put them into the folder.

2.  **data.tif** folder

    -   Put the "01_07_23" and "13_09_23" TIFF files into the folder

    -   Move the "n32_e022_1arc_v3" TIFF file into the folder

3.  **geopackage** folder

    -   Unzip the "hotosm_lby_health_facilities_gpkg" and "hotosm_lby_roads_gpkg" files and put them into the folder.

## 3.2 Data Preperation

## 3.2.1 Importing

Open QGIS and start a new project (Project \> New). Change CRS to EPSG:3197 at the bottom right. This is the CRS location of where Derna city falls under.

From the browser sidebar, look for the following layer file in their respective folders and add them into layers (via double click):

-   Derna_city_250m_hexagon

-   PHR_20230913_FloodExtent_Derna

-   gis_osm_buildings_a_free_1

-   gis_osm_pois_a_free_1

-   Health Facilities

-   Roads (Only linestring layer)

-   13_09_23

-   01_07_23

-   n32_e022_1arc_v3

## 3.2.2 Preparing the OpenAerial Satellite Images

### 3.2.2.1 Retrieving images from OpenAerialMap

Go to <https://openaerialmap.org/> and click Start Exploring to open up the map view.![](https://lh7-us.googleusercontent.com/DE9-nfs-m7pmZuQREgQwQv9RNq-CuIKa9LYk7uM68rPbJv0oyaxz1W5CZbnIrHPMJdVfiEd2wIXAWYEdgLjMyUlyeSTeCDP5tWKk-eVL23D2DWcyZ2m2bx5n91MuS4NUT69hUbHBqunOZuxhyOGZOww)

In the map page, type Derna into the search bar and click the Derna option to locate it on the map view. 

Click the gridsquare containing Derna. It should have 2 satellite images -- one pre-flood taken in July 2023, and one post-flood taken in September 2023.\

![](https://lh7-us.googleusercontent.com/lrlj2S_bZUIgr7rQ1Wm23nk5x1gw_19Vy74QxINCYVlh7vKIrmyIgTs0bO5N-s-fDbRI7waZywS-wM-RJyOfad2Z1JdGJjlBLx7aYcRbb3kH7_UzxXVOnmkWiY1qREQ8mKo8x9pe6kdy1D9Udh3QTaA)

Click the thumbnail of the first image and click the download icon in the small 4-icon toolbar. 

![](https://lh7-us.googleusercontent.com/mDyEdHcnjRmASEF4HA-XreCMrdRCe3u-aXN3u0arHecjJO67mlN9XEVBnp0EKoJghoEmN4FVFL3AhW5kEybd7u9Bp2uszAAPdNMKfUrIPdudT5WSpZhqJvCkO0xmcdRD7G2KfvgTosRKwnJofiz0zeY)

Once downloaded, rename the file to "01_07_2023". Move the file into its respective data folder in your project folder.

Repeat this for the second satellite image, and name it "13_09_23".

### 3.2.2.2 Clipping satellite images to study area

Import the layers using "Layer" from the top menu bar \> Add Layer \> Add Raster Layer...

-   Under Raster dataset(s), click the three dots icon. 

    -   Navigate to your data folder and select both downloaded TIFF files

-   Click Add

We will be clipping the satellite images extracted from OpenAerial to our study area: the hexagon map of Derna city. 

-   Navigate to: "Raster" from the top menu bar \> Extraction \> Clip Raster by Extent...

![](https://lh7-us.googleusercontent.com/u73Ym0he1ECU_ygDTIHytwf3teLr1XBh3VwF2Vg88qNVR2zgPOEky3Z64EOoSzNItEskX-iCVYYXkigfXN9LTuyJkrE-LRldyHoYhRaX_7vQ78bBVuS4SrJC8pX_v31lMv0-HHHCRSWK_qaBJur_hM4)

-   For the input fields, set

    -   Input layer: 13_09_23

    -   Clipping extent:

        -   Click the down arrow next to this icon ![](https://lh7-us.googleusercontent.com/HiZf6bJ239r0iBBRGUF9Q4sQbNn541sZN9yrCAWFhFejPsTUCP6PxeBnhD6N7GD9K2VFTetNBy26Xc7Y4jfgH77vwAeoSLPeexk50Z9_qP6UqkKZebyT0DefeAio0js4JoQY7Qy6Xuutuof29f39CDk)

        -   Under Calculate from layer, select Derna_city_250m_hexagon

This should create a temporary raster layer named Clipped in your Layers panel. We will now save this as a TIFF file in our data.tif folder within our project folder.

Repeat the steps above for 13_09_23 to produce the 13_09_23_clipped layer.

## 3.2.3 Extracting the DEM data from USGS

Launch the [USGS website](https://earthexplorer.usgs.gov/). Before you can download any data set from the USGS portal, you will need to register for an account. ![](https://lh7-us.googleusercontent.com/3v7YZyHO4dWh1-4UfUtGsND7C5l2giFQLulJLhj-uQbhKQtz8lRqWmhRYLjOv546Q-VoBv8Pypr_n74xRYN6JzQ19w48nlnWXK-VIYahctUPpZ3_3yQ6g-kQHbwQP2phx-Qp85kXlr3RpLJT2QvdsSE)

Click on Login button located at the upper-right corner of the webpage. Complete the online registration, including verification. 

Now you should be able to download data from USGS.

#### 3.2.3.1 Selecting the study area of Derna

In the lefthand side under Search Criteria, 

-   Select World Features

-   Under Feature name, type Darnah

-   Click Show

![](https://lh7-us.googleusercontent.com/_35YA-9F6Uw8FMdvPWKf8rNgQMe5N-t12RvceJdKWPgqNRqPMWcqlNdm-n6MF7EaHISa37QRvO8N2XLEbOCulolxgTmakDPqAGp97jo0vyhg5w0u1Kn0rwE_ZKvZ9d7ANbvKSQMQRwPMsno-L7xdF-g)

In the results generated, select Darnah to see the map view.

Using the plus button in the upper right corner of the map, zoom in until your view is similar to this:

![](https://lh7-us.googleusercontent.com/_J1z-squJ1-i_vB3IbhBLq3YaOm24Gc5HGW1TQKQfYhCS4pduAS3nCcZEGFEqjzsBf8pN0voRnIo4Ft1MYHQdqx9xE7bcgn158-gDaMlFVm_vCH8dovpt9oIWdmvzk9HBPqXsLhzzDBrF6gpAC9C-rA)

Select the Use Map button.

#### 3.2.3.2 Selecting the DEM data to download

Next, we will select which data set to download. Under the Dataset tab, navigate to Digital Elevation \> SRTM and expand it. 

Click on the check-box in front of SRTM 1 Arc-Second Global.

![](https://lh7-us.googleusercontent.com/FsxcMzB_MvR9vrEXHhoLhMqDPpG2m0BdVDBgOABsZzSw1kmmneVtc982uF6mj74o_dHSXUgq48RaqzwvBeK0U5T-j9q0sA34OxLc6uGivulz2hzDTASZUQfhJ_HZYBSxaa7sX6r3I0azp6BS7yMsY0w)

#### 3.2.3.3 Downloading the DEM

Click on the Results tab. Only 1 dataset may be available (SRTM1N32E022V3). 

At SRTM1N32E022V3 pane, click on the download icon ![](https://lh7-us.googleusercontent.com/geIOaWuwRRrKC_F_5z37bEbUYAY9x5CPmFWDNZnfPOzY8g1W0ilH403zRr4RuzjT4fogkZXm5QTAL3_NdV0d4xKsjOQVTyJKTDMAf2udzSFUtXeUvFeMpdi8pIKW2a1EgDcgPhuC3RFOXBCLVv0ndts). 

In the Download Options window, click download for the GeoTIFF 1 Arc-second option to download the DEM TIFF file.

## 3.3 Population Density Analysis

#### 3.3.1 Deriving buildings with Derna City

At this stage, we need to analyse the building layer given and only select buildings that fall within the Derna city area.

-   Navigate to: Vector \> Research Tools \> Select by Location...

    -   For the input fields

        -   Select features from: gis_osm_buildings_a_free_1

        -   Where the features (geometric predicate): intersect

        -   By comparing to the features from: Derna_city_250m_hexagon

            -   Advanced option:

                -   Invalid feature filtering: Do not Filter (Better Performance)

3.3_select_location

-   Click "Run"

We will now save only the selected features within our study area for use.

-   Navigate to: Layers Sidebar \> Right click "gis_osm_buildings_a_free_1" \> Export \> Save Selected Features As...

    -   For the input fields

        -   Format: GeoPackage

        -   File name:

            -   Name the file "Derna"

            -   Save the file in "GeoPackage"

        -   Layer Name: Buildings

        -   CRS: EPSG:3197

![](https://lh7-us.googleusercontent.com/4oPaAayJdFA4Y_-1DO0MuqgKzl_CCsIv0ObbcGvMkQLFEWFEW8dy4V5whipM5foKdCrab6VwGGtGk-QLv1DGivpdi-zW_8jDb75MaNPq6FXpj3iU19RLcYTh4TMkDBiBP_Xe-CG1zV9bTlEGm6sCRW8)

-   Click on "Ok"

-   Remove "gis_osm_buildings_a_free_1" layer

#### 3.3.2 Identifying residential/apartment buildings

\

At this stage, we need to identify the residential and apartment buildings in Derna as well as classify those buildings that are unclassified into the above-mentioned buildings based on area size.

-   Navigate to: Layers Sidebar \> Right click "Derna - Buildings" \> Open Attribute Table

-   From the Attribute Table:

    -   Click on "Select features using an expression" 

    -   For the input fields:

        -   Expression box: "type"  =  'apartments' or  "type"  =  'residential'

![](https://lh7-us.googleusercontent.com/9GG1Amfom_IuPEtnpvOJVLP8NrLcpvlxDZV8UOLUil6JZ_p5wJhGJo3rPEK1yA5oIryTRSHYgTzYlmqCI3uEb8eQMA-N7lhIjSUn7RZeSOIRsIbf41K5iv5F8Gz_JFzlpSie3fj_nbLWAo5VHPd1JM4)

-   Click on "Select Features"

-   Following the steps shown previously, save the selected features as a GeoPackage in the "Derna" GeoPackage and name it "Residential_Apartment_Buildings". 

\

-   Navigate to: Layers Sidebar \> Right click "Residential_Apartment_Buildings" \> Open Attribute Table

-   From the Attribute Table:

    -   Click on "Open field calculator" ![](https://lh7-us.googleusercontent.com/CaBe2Z_ZimjieWmZ9wxXEgbml7U_vOIt_DyKaQ7iLclWp6DdSNzLg8tClkkoK2e_R34kMjU6oQiePnmMiwwdYz89OcZuJenK64u6AjvwRpV-CPxWdFLWz1H4dvb0W_sbUJJk_h6ihN8YLaBCDgEggZs)

        -   For the input fields:

            -   Output field name: Area

            -   Output field type: Decimal number (real)

            -   Expression box: \$area

![](https://lh7-us.googleusercontent.com/MWeRQrVd7lpFaLE1JiZHaoDd45KDwxSZ9edDgwqoCArGwIw6Wen6iW5Mzb4K7-KypwR4-5V15yqbU4VhsCPjVWOzkQPl20rBxQ2Rz8eCMa17oOAiyEciwNkQhAOtdgfR_QfeigRk01KI5X5jYRaW39w)

-   Click on "Ok"

<!-- -->

-   Click on "Toggle edits" ![](https://lh7-us.googleusercontent.com/KPtfo_uvtaj9tF3Plpjs2IjfSelKYC0qgA6I42FzdCKLDtbmU5qRVbVDN-q3iYtUK69LnwVJ5ihHnXDrKfw0j9GvQyTk5EQKf79JBMc1sAH2_FCqKG3PKneGMRvgFMdZZ2W-Kc4X2aA-JWqCKcweJUY)

    -   Save the changes made\
        \
        \

<!-- -->

-   Take note of the "area" value of a apartment block, in this case, the building with fid of 4094

![](https://lh7-us.googleusercontent.com/pjuxti08loBqW705eCOs1yiOUcbYJ-A6pqDqEhPi2mpvYR3gnfqOUzXMngTlkFa-jC53BxNeNXJUcJqG-5kNRdTLpMDltbh_9vU-kvvZg_65SU5rFv9c14_ae9v6fCpKN38sjgQ4EE8XC4l-HSdRHVo)

-   Navigate to: Layers Sidebar \> Right click "Derna - Buildings" \> Open Attribute Table

-   From the Attribute Table:

    -   Click on "Select features using an expression" 

    -   For the input fields:

        -   Expression box: \$area \<= 416.96021051961

        -   Number is from the area of the residential area we found previously.

-   Following the steps shown previously, save the selected features as a GeoPackage in the "Derna" GeoPackage and name it "population_buildings". 

-   Remove "Derna --- Residential_Apartment_Buildings" and "Derna --- Buildings" layers.

#### 3.3.3 Cleaning up the attribute table

We will now remove any unneeded fields for our analysis to keep the table tidy.

Right click the "population_buildings" layer and open its Attribute Table. Toggle editing mode by clicking the pencil icon in the top left of the attribute table window.

Once in editing mode, click the delete fields icon ![](https://lh7-us.googleusercontent.com/JZefrtGhdSOZw1ol4Dcz_iWi28QuDqCeifob-9DgYq3bQlCFRoc-DzIW6t4yvcIrmznWyE-C9HBRtnLxtD7mmpZHKy_xT7Labur9rRNp0YPpIObJ0VyPUOQmGdsbLdW8rKqW41J5TEjZbBWoQkK1gpc) . 

-   In the dialog window, select "code" and "fclass"

-   Click OK to delete these fields

Click the pencil icon again to save the changes.

#### 3.3.4 Converting building polygons into points

In this step, we will use the QGIS plugin realcentroid to convert the residential/apartment buildings into points that we will use in the next step.

-   Navigate to: Plugins \> Manage and Install Plugins... \> All \> Search for "realcentroid" \> Install Plugin

-   Navigate to: Vector \> realcentroid \> RealCentroid

    -   For the input fields:

        -   Polygon layer: QueryLayer

        -   Output point on surface layer:

    -   File name: population_buildings_points

    -   File location: data.shp

    -   Check the "Add to map canvas" box

![](https://lh7-us.googleusercontent.com/mzo3f0Im4WZJabeTKsyBJaseWpwzMb0j33ZVPUVoEaBqCzCsRWIJTHp8XJKrQul1skIxMF-yLhGIth1E_CtrKJfrpSSN4AJbiN1Kwfh2I8SspwO3lbIGzZJ7gryUq9mmoa2nTrzHeVPx9AeJcetJcD0)

#### 3.3.5 Presenting the information in a choropleth map

-   Navigate to: Vector \> Analysis Tools \> Count Points in Polygon...

    -   For the input fields:

        -   Polygons: Derna_city_250m_hexagon

        -   Points: population_buildings_points.shp

![](https://lh7-us.googleusercontent.com/Is2Ci-GBFGAieXKGOmBIdi4Q7Vedj3k5LXtnbeyXv5TmWbfppVbqEA1jljREu6GTnAsp1iLQyzlremtPQX3IyVCHTowy2Uyx-ZYorPks2NPtf030nXikjhtAmvNDRBV0bjQ7_9BpIy1oWdiT4PLvMcQ)

-   Click on "Run"

-   Following the steps shown previously, save the new layer as a GeoPackage in the "Derna '' GeoPackage and name it"population_density". 

-   Remove the "Count", "population_buildings_points.shp" and "Derna - population_buildings"  layers.

Now that we have the population_density field ready, we will use its values to create our choropleth map.

-   Navigate to: Layers Sidebar \> Right Click "Derna - population_density"\> Properties\> Symbology

    -   For the input fields:

        -   Change "Single Symbol" to "Graduated"

        -   Value: NUMPOINTS

        -   Mode: Natural Break (Jenks)

![](https://lh7-us.googleusercontent.com/UvPbmrtgSTvo3qPJaf0zBW36Kg8Abh2_TDwItkIPjUvAOEcYpcxLqezP76YRjOUgqn-IBD1gHM_ykXprBmjSIhc7BguvS7bDEo1yPgO1v8PkNNU-uuL4yb7iYvtaCIqknBNG5_vLHTKpLiUpD-KatPo)

-   Click on "OK"

#### 3.3.6 Adding a backdrop

In this part, we will be adding a backdrop to the map, so that an aerial map of Derna city can be used to make the map easily associable.

-   Navigate to: Layers Sidebar \> Right Click "Derna - population_density"\> Properties\> Symbology

    -   For the input fields:

        -   Opacity: 60%

-   Using 01_07_23 as a backdrop should make the map look like this:

![](https://lh7-us.googleusercontent.com/BapDfSbn_o-8et2ge_H_b5mlgibFP0yWLqeRAzcavGUCxWXttctGMPSMzgvkpzIo3s-BUIz9XA-PSFi-gCUZ9Fm3NETqkpjfMSICWGfCwmTLOc5QV7qNTiNfudVAAmV7y4ye2oWDDzi_lGPcokAE1ug)

## **DEM Sites Map**

## 3.4 Site Suitability of Evacuation Centres

Now we'll create the map to assess site suitability of the identified potential evacuation sites (schools and universities).

#### 3.4.1 Preparing the DEM layer

The DEM layer (n32_e022_1arc_v3) should be in your layers panel from the earlier steps. 

Since the DEM covers a larger area of Northern Africa, we will clip the DEM to our study area.

-   Navigate to: Raster \> Extraction \> Clip Raster by Mask Layer...

    -   For the input fields

        -   Input layer: n32_e022_1arc_v3

        -   Mask layer: Derna_city_250m_hexagon

        -   Target CRS: EPSG:3197 LGD2006 / Libya ™ Zone 12

We will now save the temporary clipped layer to our geopackage.

-   Navigate to: Layers Sidebar \> Right click "Clipped" 

-   Go to: Export \> Save Features As...

    -   For the input fields

        -   Format: GeoPackage

        -   File name: navigate to your project folder and double click your geopackage

        -   Layer Name: DEM_clipped

        -   CRS: EPSG:3197

<!-- -->

-   Click on "Ok"

-   Remove "n32_e022_1arc_v3" layer and the temporary "Clipped" layer

#### 3.4.2 Determining the flood extent

In the step, we will cut out the extent of the flood that affects Derna City

-   Navigate: Vector \> Geoprocessing Tools \> Clip...

    -   For the input fields

        -   Input layer: PHR_20230913_FloodExtent_Derna

        -   Overlay layer: Derna_city_250m_hexagon

![](https://lh7-us.googleusercontent.com/EqKB8g6T-r61BsCXLhnAAEifWH0-V3FNORe3IDSFNMHVBqtcPtBHEVsyqtliR25gplsba8vqGwY5br9sfOfIKlTK5ev4s-mvNn6kl_0qDICb0PunUapf4JFU2QYvt6wtqmz5CD-lDWxLY4rkHR5gf00)

-   Click on "Run"

-   Following the steps shown previously, save the new layer as a GeoPackage in the "Derna '' GeoPackage and name it"flood_extent". 

-   Remove the "PHR_20230913_FloodExtent_Derna" and "Clipped" layer.

-   Navigate: Layers Sidebar \> Right click "flood_extent" \> Properties \> Symbology

    -   Under "Fill" \> Left click "Simple Fill"

        -   Fill colour: "Transparent Fill"

        -   Stroke Width: 1

![](https://lh7-us.googleusercontent.com/yRAmTR3-mfIxUJ7vidQtB_Ff7Wi3DYhnotcA4fyE6RlxhNBwUgTaJDzk70V5swPBbqSABiItLziiYkFZ2ajT7fgmw_4O-sAkmeBYEVJrCKiE-H0cX9c2lAbrfEn6WhFEiS6SJp55ioncsrzeVWTPHGI)

o   Click "OK"

Following the steps in 3.3.3, keep only the fields listed and remove all other fields:

-   fid, Sensor_Dat, Area_m2, Area_ha, SHAPE_Leng, SHAPE_Area

\

#### 3.4.3 Extracting statistics from flood extent for ranking

We will use the flood extent polygon to analyse the statistics of the flood elevation levels reached. We will use the native Zonal Statistics function for this.

-   Navigate to: "Processing" from the top menu bar \> Toolbox

-   In the Processing Toolbox panel, search for "Zonal Statistics"

-   Double click on the Zonal Statistics function under Raster Analysis

    -   For the input fields

        -   Input layer: flood_extent

        -   Raster layer: DEM_clipped

        -   Under Statistics to calculate, click the three dots icon

            -   Select Mean, Median, Minimum, and Maximum

-   Click "OK"

Following the steps from 3.4.1, save the temporary Zonal Statistics layer into your "Derna" GeoPackage and name it "flood_zonal_statistics". Afterwards, remove the temporary Zonal Statistics layer.

We will quickly clean up the data table. Right click the "flood_zonal_statistics" layer and open its Attribute Table. 

-   Following the steps in 3.3.3, keep only the fields listed and remove all other fields:

    -   fid, Sensor_Dat, \_mean, \_median, \_min, \_max

Observing the summary statistics, take note of the median, mean and max values.

#### 3.4.4 Ranking the elevation levels by colour

We will now reflect the ranking of the elevation suitability using the summary statistics from the previous section.

-   Navigate to: Layers Sidebar \> Right Click "DEM_clipped" \> Properties \> Symbology

    -   For the input fields under Band Rendering:

        -   Render type: Singleband pseudocolor

        -   Edit the values as shown below:

            -   Orange - Median

            -   Yellow - Mean

            -   Green - Max

![](https://lh7-us.googleusercontent.com/T7rt9zBJE7Z-jJbbG0D6T12lA9ab28yCnp3tjxsjAEwkO_7Ok3KQ2gqdjXn4Au5nM_ReKn6yRnVXmPXvf_T13GxqHLmxpGcguOHG2QreUeQKDv1ZYkCC7L0LsAvm9MAs6gvYGELtr5nTqTRccf4OBMw)

-   Gamma: 0.50

<!-- -->

-   Once ready, click "Apply"

<!-- -->

-   In the Properties window, navigate to the Transparency tab

    -   Set Global Opacity to 70%

    -   Click "Apply"

#### 3.4.5 Extracting Evacuation Centres as points

We will be using the Points of Interest (POIs) shapefile from the OSM data for Libya. First, we will clip the data to our study area of the hexagon map. 

-   Navigate to: Vector \> Research Tools \> Select by Location...

    -   For the input fields

        -   Select features from: gis_osm_pois_a_free_1

        -   Where the features (geometric predicate): intersect

        -   By comparing to the features from: Derna_city_250m_hexagon

            -   Under Advanced options:

                -   Set invalid feature filtering: Do not Filter (Better Performance)

    -   Click "Run"

<!-- -->

-   Following the steps shown previously, save the new layer as a GeoPackage in the "Derna '' GeoPackage and name it"POIS ''. 

-   Remove the "gis_osm_pois_a_free_1"  layer. 

![](https://lh7-us.googleusercontent.com/YAl0JYQseseoir0zkmAZwB9M3SKQTwq6O8AduKP7IpATTZ2L4nL4rFbdYRZSnFW-8cBRSKHKqppIKA5QOAsOr-Xz-iWrD1_7-iDo-B9wx5NgEZ22BTE1zlxW_TuxRDWnDuhEPxpZDyniSCWyG08VIRE)

Now, we will find the schools and universities in the Derna city area. 

-   Navigate to: Layers Sidebar \> Right click "Derna - POIS" \> Open Attribute Table

-   From the Attribute Table:

    -   Click on "Select features using an expression" 

    -   For the input fields:

        -   Expression box:  "fclass"  =  'school' or  "fclass"  =  'university' 

-   Click on "Select Features"

-   Following the steps shown previously, save the selected features as a GeoPackage in the "Derna" GeoPackage and name it "evacuation_centres". 

We will then convert the polygons layer into a point layer.

Following the steps shown previously in 3.3.4, convert the evacuation_centres polygons into points using realcentroid. 

-   Save the resulting layer into the "Derna" GeoPackage and name it "evacuation_centres_points". 

-   Remove the "Centroids", "Derna - evacuation_centres", "Derna - POIS" and "gis_osm_pois_a_free_1" layers.

\

![](https://lh7-us.googleusercontent.com/hhBgUpqvpVir8TNF_9Jj0mNCA1sACkjRkyMrP0lkXwp3z6L4RByRY5aYo7sqFhwYMEsnV-iE2L4iX1GSPjtcUOWKe4dj-P4Tds5oa6rS28_Gi3DHDJVCb8vQSxkPy-kz2qSeHyfZyfnQ0ZDBrOcJ18c)

\

Following the steps in 3.3.3, keep only the fields listed and remove all other fields:

-   id, osm_id, fclass, name

\

#### 3.4.6 Separating the Viable and Non-viable Evacuation Centres

Referencing the colour-ranked DEM layer, we will separate the viable and non-viable sites from the "evacuation_centres_points" layer.

\

##### 3.4.6.1 Extracting the Non-Viable Sites

We will select out the evacuation centres that fall within the higher risk areas of flooding (the red-yellow colours) based on visual reference.

-   Navigate to: Toolbar \> Select Features by Polygon ![](https://lh7-us.googleusercontent.com/4KEfcuvNOU_DJhYDBSjIXg8kfVyPGMFATK97_bQMTJRD-ip95DlQ-_Z_7xK-tgpj_l11YaTwwtSYausXikXyb6xQbwmag4RQMyEuGaWj90lrQDhyb6lgiNj7W-vMP3eQLYTzl3EwYKsE9HSjrtcJBUA)

    -   Make sure the "evacuation_centres_points" layer is selected in the Layers Panel.

    -   Draw a rough polygon that selects all the points that fall within red-coloured to yellow-coloured areas, using left mouse clicks to create the points of the polygon.

    -   Right click to confirm the selection of features within the shape drawn.

![](https://lh7-us.googleusercontent.com/gmiKlCmrMvSoGZX9Cru29pexw3lFvhBGkXEFoeWjOc9lgzzUtjH3M20U0FVtYATp0MuGOpFIGIFz4Nck2lVGF_OgPkvtqc555jtgidN_Jh1bAbxKmcfHm5Py8XgA9TfIQqPDOOEIJakv4KJ6tXaHQG4)

Following the steps in 3.3.1, save the selected points into your geopackage as "Non-viable School Sites". 

-   Rename the new layer in the Layers panel to remove the name of the geopackage for tidiness.

\

##### 3.4.6.2 Adding the symbol for Non-viable Sites

To indicate that these initial sites are no longer considered, we will change the point symbol to a cross icon.

-   Navigate to: Layers Sidebar \> Right Click "Non-viable School Sites" \> Properties \> Symbology

    -   Under Marker, click Simple Marker

        -   For input fields:

            -   Symbol layer type: SVG Marker

            -   SVG Image: ![](https://lh7-us.googleusercontent.com/ZjS9C9E5WiL5Woa7fCYlpHFL-Pklph5V1OkPBSmS0-AzKKxwUxWt0ndGBL6qnuJE39h2ekpaSgBe98LwAoZE5kmbHjVpuEZqOafl8y-MtL-jBipOWcB5KjkT8zb1zHtGJ-8zlJrITUeI_bFBaF3uUns)

            -   Size: 5.50 Millimetres

            -   Rotation: 45º

            -   Fill colour: Teal (HTML notation: #00ffde)

                -   Choose a colour that will stand out against the red-yellow colours of the DEM layer

            -   Stroke colour: Black (HTML notation: #000000)

            -   Stroke Width: 0.20 Millimetres

    -   Feel free to change the colours as you wish

\

##### 3.4.6.3 Extracting the Viable Sites

We will now select the remaining evacuation centres which should fall within the lower risk areas of flooding (the green-blue colours).

-   Navigate to: Toolbar \> Select Features by Polygon ![](https://lh7-us.googleusercontent.com/4KEfcuvNOU_DJhYDBSjIXg8kfVyPGMFATK97_bQMTJRD-ip95DlQ-_Z_7xK-tgpj_l11YaTwwtSYausXikXyb6xQbwmag4RQMyEuGaWj90lrQDhyb6lgiNj7W-vMP3eQLYTzl3EwYKsE9HSjrtcJBUA)

    -   Make sure the "evacuation_centres_points" layer is selected in the Layers Panel.

    -   Draw a rough polygon that selects all the remaining points, using left mouse clicks to create the points of the polygon.

    -   Right click to confirm the selection of features within the shape drawn.

![](https://lh7-us.googleusercontent.com/gx94f-Kv0nw_i2CfP3_un4KE1sANvE7KI3gYBGofDNDa6PYiWZFZhW0WZsp158WbwZGN_gBvWMHj3YkC4AwV989CZfgw2STOuyoaolOGYSJlJxBwnlEbJGYo88c3y6IW5GKwzwZr6Lx6ObwY3XYDHrw)

Following the steps in 3.3.1, save the selected points into your geopackage as "Viable School Sites". 

-   Rename the new layer in the Layers panel to remove the name of the geopackage for tidiness.

\

##### 3.4.6.4 Adding the symbol for Viable Sites

To indicate that these sites are suitable evacuation centres, we will change the point symbol to a shelter icon.

-   Navigate to: Layers Sidebar \> Right Click "Viable School Sites" \> Properties \> Symbology

    -   Under Marker, click Simple Marker

        -   For input fields:

            -   Symbol layer type: SVG Marker

            -   SVG Image: ![](https://lh7-us.googleusercontent.com/wx6Z0gru5dvcQq6t2U8GJ0J8AQ_lBqFVZK3vB5aVaxe97eDPrlMKvmX_RhgkYiUnKkNoykOkwVVe5-01TnksqF5I_KZGM_R20nmFAmEJOKmgEqel0viFc7bq2sz-9DIX0SMWLcx_1OeRKNT54in2oAA)

            -   Size: 8.00 Millimetres

            -   Fill colour: White (HTML notation: #ffffff)

            -   Stroke colour: Blue (HTML notation: #0006c0)

            -   Stroke Width: 0.30 Millimetres

            -   Under Offset, y: -2.0 Millimetres

    -   Feel free to change the colours as you wish, but do ensure these icons visually distinct from the cross icons in colour

From the Layers panel, uncheck the "evacuation_centres_points" layer to hide its visibility. Your map should look something like this:

![](https://lh7-us.googleusercontent.com/BwAfNyjViuU6R02PPf4L91_tHxk32QBO5MzcyOxsD4UsY3oySclhopm-mJTsY3Q1FDtcGtztJXr4JP0rYUxq8SmvTpyai1lTL1_vCZSAQ_U-868ol-q_7NlwxcjB3mf46dmZQD9mP1ZvsQx38EY5gao)

\

#### 3.4.7 Adding the Satellite View Backdrop

We will be adding a backdrop to the map, so that an aerial map of Derna city can be used to make the map easily associable.

-   Using 13_09_23_clipped as a backdrop should make the map look like this:

![](https://lh7-us.googleusercontent.com/bJKqo7tVperVIq2VYtksewWJOHVp2aBpCS1yPvxrukq8QPUbq6ymq9D9My0xz7KIQwFLPhVsQbjiwS9rGhoX9mYR8oiTD3EYepbhMWsq8rqFhkJB0C-fFH6EDDRYetIY3eY5xlOcqCYmQ2n89o8emJk)

## **Accessibility Choropleth**

3.5 Accessibility analysis

In this part, we will be analysing the accessibility of health facilities and evacuation centres in Derna city.
